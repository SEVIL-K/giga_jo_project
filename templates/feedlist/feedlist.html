{% extends 'base.html' %}

{% block title %}피드 상세 페이지{% endblock %}

{% block content %}
<div style="text-align: center; font-weight: bold; margin-top: 50px; position: relative;;">
    <img src="https://visitoakgroveky.com/wp-content/uploads/2018/10/blog-header-background.jpg" width="950" height="333">
  </div>
  <div
    style="position: absolute; margin-top: -21px; margin-left: 36%;width: 500px; height: 50px; border: solid; z-index: 1; background-color: white;">
    <h3 style="text-align: center; margin-top: 3.2px; letter-spacing : 0.5em;">FEED PAGE</h3>
  </div>
  {% if request.user.is_authenticated %}
  <div class="profile_card" style="margin-top: -280px; margin-left: 80px;">
    {% if request.user.image %}
        <div>
        <img src="{{ request.user.image.url }}" class="img">
        </div>
    {% endif %}
    <div class="textBox">
      <div class="textContent">
        <p class="h1" style="margin-top: 10px;">{{ request.user.nickname }}</p>
      </div>
      <p class="p">@{{ request.user.username }}</p>
      <div>
      </div>
    </div>
  </div>
  
  {% else %}
  <div>
    <a href="/login/">로그인</a>
    <a href="/signup/">회원가입</a>
  </div>
  {% endif %}
  {% if user.is_authenticated %}
  <div style="margin-top: 50px; margin-left: 85px;">
    <button type="button" class="button1" onclick="location.href='/feed/create/';">
      <span class="button__text">피드 작성</span>
      <span class="button__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" viewBox="0 0 24 24" stroke-width="2"
          stroke-linejoin="round" stroke-linecap="round" stroke="currentColor" height="24" fill="none" class="svg">
          <line y2="19" y1="5" x2="12" x1="12"></line>
          <line y2="12" y1="12" x2="19" x1="5"></line>
        </svg></span>
    </button>
  </div>
  {% endif %}
  
  <div
    style="margin: 200px 0px 50px 410px; display: inline-flex; flex-wrap: wrap; justify-content: flex-start; width: 1000px;">
    {% for feed in feeds %}
    <div class="my_card" onclick="location.href='/feed/reed/{{ feed.id }}'"
      style="border: solid; border-width: 0.7px; margin-top: 20px; margin-right: 21px; cursor: pointer;">
      {% if feed.image %}
      <div class="my_card-image">
        <img class="my_card-image" src="{{ feed.image.url }}">
      </div>
      {% endif %}
      <div style="display: flex; flex-direction: row;">
        {% if feed.author.image %}
            <div style="margin-left: 6px; margin-top: 7px;">
                <img src="{{ feed.author.image.url }}" class="rounded-circle img-fluid" height='25' width='25'>
            </div>
        {% endif %}
        <div class="author" style="margin-left: 10px; margin-top: 5px;">
          By <span class="name">{{ feed.author.username }}</span> <br />{{ feed.created_at|timesince }} ago
        </div>
      </div>
      <div class="category">{{ feed.title }}</div>
      <div class="heading"> {{ feed.content }}</div>
  
      <!-- </div> -->
    </div>
    {% endfor %}
  </div>

        <!-- paginator 1페이지만 있을 때 숨기기 -->
        {% if page_obj.has_other_pages %}
        <ul style="display:flex;list-style: none;">

            <!-- paginator 이전 페이지 구현 -->
            {% if page_obj.has_previous %}
            <li style="margin:3px;">
                <a style="text-decoration:none; color: blue;" href="?page={{page_obj.previous_page_number}}">&#10094;
                    Prev</a>
            </li>
            {% endif %}

            <!-- paginator 페이지 숫자 보여주기 -->
            {% for page in custom_range %}
            <!-- paginator 현재 페이지 강조하기 -->
            {% if page == page_obj.number %}
            <li style="margin:3px">
                <a style="text-decoration: none; color: red;" href="?page={{ page }}">{{ page }}</a>
            </li>
            {% else %}
            <li style="margin:3px">
                <a style="text-decoration: none; color: blue;" href="?page={{ page }}">{{ page }}</a>
            </li>
            {% endif %}
            {% endfor %}

            <!-- paginator 다음 페이지 구현 -->
            {% if page_obj.has_next %}
            <li style="margin:3px;">
                <a style="text-decoration:none; color: blue;" href="?page={{page_obj.next_page_number}}">&#10095;
                    Next</a>
            </li>
            {% endif %}
        </ul>
        {% endif %}
{% endblock %}